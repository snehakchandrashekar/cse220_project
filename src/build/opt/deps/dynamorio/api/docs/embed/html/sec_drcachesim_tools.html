---
title: "Analysis Tool Suite"
layout: default
permalink: /sec_drcachesim_tools.html
---
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DynamoRIO
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Analysis Tool Suite </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In addition to a CPU cache simulator, other analysis tools are available that operate on memory address traces. Which tool is used can be selected with the <code>-simulator_type</code> parameter. New, custom tools can also be created, as described in <a class="el" href="sec_drcachesim_newtool.html">Creating New Analysis Tools</a>.</p>
<ul>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_cache_sim">Cache Simulator</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_TLB_sim">TLB Simulator</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_reuse_distance">Reuse Distance</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_reuse_time">Reuse Time</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_basic_counts">Event Counts</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_opcode_mix">Opcode Mix</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_view">Human-Readable View</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_func_view">View Function Calls</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_histogram">Cache Line Histogram</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_invariant_checker">Invariant Checker</a></li>
<li><a class="el" href="sec_drcachesim_tools.html#sec_tool_syscall_mix">System Call Mix</a></li>
</ul>
<h1><a class="anchor" id="sec_tool_cache_sim"></a>
Cache Simulator</h1>
<p>This is the default tool. Here is an exmample of running it on an offline trace: </p><div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -offline -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">$ bin64/drrun -t drcachesim -indir drmemtrace.*.dir</div>
<div class="line">Cache simulation results:</div>
<div class="line">Core #0 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                          258,433</div>
<div class="line">    Misses:                          1,148</div>
<div class="line">    Miss rate:                        0.44%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                           93,654</div>
<div class="line">    Misses:                          2,624</div>
<div class="line">    Prefetch hits:                     458</div>
<div class="line">    Prefetch misses:                 2,166</div>
<div class="line">    Miss rate:                        2.73%</div>
<div class="line">Core #1 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            8,895</div>
<div class="line">    Misses:                             99</div>
<div class="line">    Miss rate:                        1.10%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                            3,448</div>
<div class="line">    Misses:                            156</div>
<div class="line">    Prefetch hits:                      26</div>
<div class="line">    Prefetch misses:                   130</div>
<div class="line">    Miss rate:                        4.33%</div>
<div class="line">Core #2 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            4,150</div>
<div class="line">    Misses:                            101</div>
<div class="line">    Miss rate:                        2.38%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                            1,578</div>
<div class="line">    Misses:                            130</div>
<div class="line">    Prefetch hits:                      25</div>
<div class="line">    Prefetch misses:                   105</div>
<div class="line">    Miss rate:                        7.61%</div>
<div class="line">Core #3 (0 thread(s))</div>
<div class="line">LL stats:</div>
<div class="line">    Hits:                            1,414</div>
<div class="line">    Misses:                          2,844</div>
<div class="line">    Prefetch hits:                     824</div>
<div class="line">    Prefetch misses:                 1,577</div>
<div class="line">    Local miss rate:                 66.79%</div>
<div class="line">    Child hits:                    370,667</div>
<div class="line">    Total miss rate:                  0.76%</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_TLB_sim"></a>
TLB Simulator</h1>
<p>To simulate TLB devices instead of caches, pass <code>TLB</code> to <code>-simulator_type:</code> </p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type TLB -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">TLB simulation results:</div>
<div class="line">Core #0 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                          252,412</div>
<div class="line">    Misses:                            401</div>
<div class="line">    Miss rate:                        0.16%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                           87,132</div>
<div class="line">    Misses:                          9,127</div>
<div class="line">    Miss rate:                        9.48%</div>
<div class="line">  LL stats:</div>
<div class="line">    Hits:                            9,315</div>
<div class="line">    Misses:                            213</div>
<div class="line">    Local miss rate:                  2.24%</div>
<div class="line">    Child hits:                    339,544</div>
<div class="line">    Total miss rate:                  0.06%</div>
<div class="line">Core #1 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            8,709</div>
<div class="line">    Misses:                             20</div>
<div class="line">    Miss rate:                        0.23%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                            3,544</div>
<div class="line">    Misses:                             55</div>
<div class="line">    Miss rate:                        1.53%</div>
<div class="line">  LL stats:</div>
<div class="line">    Hits:                               15</div>
<div class="line">    Misses:                             60</div>
<div class="line">    Local miss rate:                 80.00%</div>
<div class="line">    Child hits:                     12,253</div>
<div class="line">    Total miss rate:                  0.49%</div>
<div class="line">Core #2 (1 thread(s))</div>
<div class="line">  L1I stats:</div>
<div class="line">    Hits:                            1,622</div>
<div class="line">    Misses:                             21</div>
<div class="line">    Miss rate:                        1.28%</div>
<div class="line">  L1D stats:</div>
<div class="line">    Hits:                              689</div>
<div class="line">    Misses:                             35</div>
<div class="line">    Miss rate:                        4.83%</div>
<div class="line">  LL stats:</div>
<div class="line">    Hits:                                3</div>
<div class="line">    Misses:                             53</div>
<div class="line">    Local miss rate:                 94.64%</div>
<div class="line">    Child hits:                      2,311</div>
<div class="line">    Total miss rate:                  2.24%</div>
<div class="line">Core #3 (0 thread(s))</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_reuse_distance"></a>
Reuse Distance</h1>
<p>To compute reuse distance metrics:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type reuse_distance -reuse_distance_histogram -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Reuse distance tool aggregated results:</div>
<div class="line">Total accesses: 349632</div>
<div class="line">Unique accesses: 196603</div>
<div class="line">Unique cache lines accessed: 4235</div>
<div class="line"> </div>
<div class="line">Reuse distance mean: 14.64</div>
<div class="line">Reuse distance median: 1</div>
<div class="line">Reuse distance standard deviation: 104.10</div>
<div class="line">Reuse distance histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       0      153029   44.36%   44.36%</div>
<div class="line">       1      101294   29.37%   73.73%</div>
<div class="line">       2       14116    4.09%   77.82%</div>
<div class="line">       3       14248    4.13%   81.95%</div>
<div class="line">       4        8894    2.58%   84.53%</div>
<div class="line">       5        2733    0.79%   85.32%</div>
<div class="line">...</div>
<div class="line">==================================================</div>
<div class="line">Reuse distance tool results <span class="keywordflow">for</span> shard 29327 (thread 29327):</div>
<div class="line">Total accesses: 335084</div>
<div class="line">Unique accesses: 187927</div>
<div class="line">Unique cache lines accessed: 4148</div>
<div class="line"> </div>
<div class="line">Reuse distance mean: 14.77</div>
<div class="line">Reuse distance median: 1</div>
<div class="line">Reuse distance standard deviation: 106.02</div>
<div class="line">Reuse distance histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       0      147157   44.47%   44.47%</div>
<div class="line">       1       96820   29.26%   73.72%</div>
<div class="line">       2       13613    4.11%   77.84%</div>
<div class="line">       3       13834    4.18%   82.02%</div>
<div class="line">       4        8666    2.62%   84.64%</div>
<div class="line">       5        2552    0.77%   85.41%</div>
<div class="line">...</div>
<div class="line">    3658          29    0.01%  100.00%</div>
<div class="line">    3851           1    0.00%  100.00%</div>
<div class="line"> </div>
<div class="line">Reuse distance threshold = 100 cache lines</div>
<div class="line">Top 10 frequently referenced cache lines</div>
<div class="line">        cache line:     #references   #distant refs</div>
<div class="line">    0x7f2a86b3fd80:        27980,            0</div>
<div class="line">    0x7f2a86b3fdc0:        18823,            0</div>
<div class="line">    0x7f2a88388fc0:        16409,          111</div>
<div class="line">    0x7f2a8838abc0:        15176,            6</div>
<div class="line">    0x7f2a883884c0:         9930,           20</div>
<div class="line">    0x7f2a88388480:         7944,           20</div>
<div class="line">    0x7f2a88388500:         7574,           20</div>
<div class="line">    0x7f2a88398d00:         7390,          100</div>
<div class="line">    0x7f2a86b3fd40:         6668,            0</div>
<div class="line">    0x7f2a88388440:         5717,           20</div>
<div class="line">Top 10 distant repeatedly referenced cache lines</div>
<div class="line">        cache line:     #references   #distant refs</div>
<div class="line">    0x7f2a885a4180:          246,          132</div>
<div class="line">    0x7f2a87504ec0:          202,          128</div>
<div class="line">    0x7f2a875044c0:          323,          126</div>
<div class="line">    0x7f2a885a4480:          220,          126</div>
<div class="line">    0x7f2a87504f00:          293,          124</div>
<div class="line">    0x7f2a86fd7e00:          289,          124</div>
<div class="line">    0x7f2a875049c0:          221,          124</div>
<div class="line">    0x7f2a875053c0:          270,          122</div>
<div class="line">    0x7f2a86db9c00:          269,          122</div>
<div class="line">    0x7f2a875047c0:          201,          122</div>
<div class="line"> </div>
<div class="line">==================================================</div>
<div class="line">Reuse distance tool results <span class="keywordflow">for</span> shard 29328 (thread 29328):</div>
<div class="line">Total accesses: 12216</div>
<div class="line">Unique accesses: 7251</div>
<div class="line">Unique cache lines accessed: 319</div>
<div class="line"> </div>
<div class="line">Reuse distance mean: 12.98</div>
<div class="line">Reuse distance median: 1</div>
<div class="line">Reuse distance standard deviation: 38.19</div>
<div class="line">Reuse distance histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       0        4965   41.73%   41.73%</div>
<div class="line">       1        3758   31.59%   73.32%</div>
<div class="line">       2         411    3.45%   76.78%</div>
<div class="line">       3         348    2.93%   79.70%</div>
<div class="line">       4         179    1.50%   81.21%</div>
<div class="line">       5         152    1.28%   82.48%</div>
<div class="line">...</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_reuse_time"></a>
Reuse Time</h1>
<p>A reuse time tool is also provided, which counts the total number of memory accesses (without considering uniqueness) between accesses to the same address:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type reuse_time -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Reuse time tool aggregated results:</div>
<div class="line">Total accesses: 88281</div>
<div class="line">Total instructions: 261315</div>
<div class="line">Mean reuse time: 433.47</div>
<div class="line">Reuse time histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       1       27893   32.84%      32.84%</div>
<div class="line">       2       10948   12.89%      45.73%</div>
<div class="line">       3        5789    6.82%      52.54%</div>
<div class="line">...</div>
<div class="line">==================================================</div>
<div class="line">Reuse time tool results <span class="keywordflow">for</span> shard 29482 (thread 29482):</div>
<div class="line">Total accesses: 84194</div>
<div class="line">Total instructions: 250854</div>
<div class="line">Mean reuse time: 450.01</div>
<div class="line">Reuse time histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       1       26677   32.86%      32.86%</div>
<div class="line">       2       10508   12.95%      45.81%</div>
<div class="line">       3        5427    6.69%      52.50%</div>
<div class="line">...</div>
<div class="line">==================================================</div>
<div class="line">Reuse time tool results <span class="keywordflow">for</span> shard 29483 (thread 29483):</div>
<div class="line">Total accesses: 3411</div>
<div class="line">Total instructions: 8805</div>
<div class="line">Mean reuse time: 86.36</div>
<div class="line">Reuse time histogram:</div>
<div class="line">Distance       Count  Percent  Cumulative</div>
<div class="line">       1        1014   31.56%      31.56%</div>
<div class="line">       2         363   11.30%      42.86%</div>
<div class="line">       3         308    9.59%      52.44%</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_basic_counts"></a>
Event Counts</h1>
<p>To simply see the counts of instructions and memory references broken down by thread use the basic counts tool:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type basic_counts -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Basic counts tool results:</div>
<div class="line">Total counts:</div>
<div class="line">      134566 total (fetched) instructions</div>
<div class="line">       13838 total unique (fetched) instructions</div>
<div class="line">         423 total non-fetched instructions</div>
<div class="line">           0 total prefetches</div>
<div class="line">       30919 total data loads</div>
<div class="line">       13122 total data stores</div>
<div class="line">           0 total icache flushes</div>
<div class="line">           0 total dcache flushes</div>
<div class="line">           3 total threads</div>
<div class="line">        1134 total scheduling markers</div>
<div class="line">           5 total transfer markers</div>
<div class="line">          10 total <span class="keyword">function</span> <span class="keywordtype">id</span> markers</div>
<div class="line">           0 total <span class="keyword">function</span> <span class="keywordflow">return</span> address markers</div>
<div class="line">          30 total <span class="keyword">function</span> argument markers</div>
<div class="line">           5 total <span class="keyword">function</span> <span class="keywordflow">return</span> value markers</div>
<div class="line">           0 total physical address + <span class="keyword">virtual</span> address marker pairs</div>
<div class="line">           0 total physical address unavailable markers</div>
<div class="line">          75 total system call number markers</div>
<div class="line">           0 total blocking system call markers</div>
<div class="line">          12 total other markers</div>
<div class="line">           0 total encodings</div>
<div class="line">Thread 64951 counts:</div>
<div class="line">      130900 (fetched) instructions</div>
<div class="line">       13469 unique (fetched) instructions</div>
<div class="line">         423 non-fetched instructions</div>
<div class="line">           0 prefetches</div>
<div class="line">       29844 data loads</div>
<div class="line">       12594 data stores</div>
<div class="line">           0 icache flushes</div>
<div class="line">           0 dcache flushes</div>
<div class="line">        1072 scheduling markers</div>
<div class="line">           5 transfer markers</div>
<div class="line">           4 <span class="keyword">function</span> <span class="keywordtype">id</span> markers</div>
<div class="line">           0 <span class="keyword">function</span> <span class="keywordflow">return</span> address markers</div>
<div class="line">          12 <span class="keyword">function</span> argument markers</div>
<div class="line">           2 <span class="keyword">function</span> <span class="keywordflow">return</span> value markers</div>
<div class="line">           0 physical address + <span class="keyword">virtual</span> address marker pairs</div>
<div class="line">           0 physical address unavailable markers</div>
<div class="line">          56 system call number markers</div>
<div class="line">           0 blocking system call markers</div>
<div class="line">           4 other markers</div>
<div class="line">           0 encodings</div>
<div class="line">Thread 64958 counts:</div>
<div class="line">        1861 (fetched) instructions</div>
<div class="line">        1009 unique (fetched) instructions</div>
<div class="line">           0 non-fetched instructions</div>
<div class="line">           0 prefetches</div>
<div class="line">         538 data loads</div>
<div class="line">         262 data stores</div>
<div class="line">           0 icache flushes</div>
<div class="line">           0 dcache flushes</div>
<div class="line">          30 scheduling markers</div>
<div class="line">           0 transfer markers</div>
<div class="line">           2 <span class="keyword">function</span> <span class="keywordtype">id</span> markers</div>
<div class="line">           0 <span class="keyword">function</span> <span class="keywordflow">return</span> address markers</div>
<div class="line">           6 <span class="keyword">function</span> argument markers</div>
<div class="line">           1 <span class="keyword">function</span> <span class="keywordflow">return</span> value markers</div>
<div class="line">           0 physical address + <span class="keyword">virtual</span> address marker pairs</div>
<div class="line">           0 physical address unavailable markers</div>
<div class="line">           9 system call number markers</div>
<div class="line">           0 blocking system call markers</div>
<div class="line">           4 other markers</div>
<div class="line">           0 encodings</div>
<div class="line">Thread 64959 counts:</div>
<div class="line">        1805 (fetched) instructions</div>
<div class="line">         978 unique (fetched) instructions</div>
<div class="line">           0 non-fetched instructions</div>
<div class="line">           0 prefetches</div>
<div class="line">         537 data loads</div>
<div class="line">         266 data stores</div>
<div class="line">           0 icache flushes</div>
<div class="line">           0 dcache flushes</div>
<div class="line">          32 scheduling markers</div>
<div class="line">           0 transfer markers</div>
<div class="line">           4 <span class="keyword">function</span> <span class="keywordtype">id</span> markers</div>
<div class="line">           0 <span class="keyword">function</span> <span class="keywordflow">return</span> address markers</div>
<div class="line">          12 <span class="keyword">function</span> argument markers</div>
<div class="line">           2 <span class="keyword">function</span> <span class="keywordflow">return</span> value markers</div>
<div class="line">           0 physical address + <span class="keyword">virtual</span> address marker pairs</div>
<div class="line">           0 physical address unavailable markers</div>
<div class="line">          10 system call number markers</div>
<div class="line">           0 blocking system call markers</div>
<div class="line">           4 other markers</div>
<div class="line">           0 encodings</div>
</div><!-- fragment --><p>The non-fetched instructions are x86 string loop instructions, where subsequent iterations do not incur a fetch. They are included in the trace as a different type of trace entry to support core simulators in addition to cache simulators.</p>
<h1><a class="anchor" id="sec_tool_opcode_mix"></a>
Opcode Mix</h1>
<p>The opcode_mix tool uses the non-fetched instruction information along with the preserved libraries and binaries from the traced execution to gather more information on each executed instruction than was stored in the trace. To run on online traces, pass the <code>-instr_encodings</code> option. The results are broken down by the opcodes used in DR's IR, where for x86 <code>mov</code> is split into a separate opcode for load and store but both have the same public string "mov":</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -offline -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">$ bin64/drrun -t drcachesim -simulator_type opcode_mix -indir drmemtrace.*.dir</div>
<div class="line">Opcode mix tool results:</div>
<div class="line">         267271 : total executed instructions</div>
<div class="line">          36432 :       mov</div>
<div class="line">          31075 :       mov</div>
<div class="line">          24715 :       add</div>
<div class="line">          22579 :      test</div>
<div class="line">          22539 :       cmp</div>
<div class="line">          12137 :       lea</div>
<div class="line">          11136 :       jnz</div>
<div class="line">          10568 :     movzx</div>
<div class="line">          10243 :        jz</div>
<div class="line">           9056 :       and</div>
<div class="line">           8064 :       jnz</div>
<div class="line">           7279 :        jz</div>
<div class="line">           5659 :      push</div>
<div class="line">           4528 :       sub</div>
<div class="line">           4357 :       pop</div>
<div class="line">           4001 :       shr</div>
<div class="line">           3427 :      jnbe</div>
<div class="line">           2634 :       mov</div>
<div class="line">           2469 :       shl</div>
<div class="line">           2344 :        jb</div>
<div class="line">           2291 :       ret</div>
<div class="line">           2178 :       xor</div>
<div class="line">           2164 :      call</div>
<div class="line">           2111 :   pcmpeqb</div>
<div class="line">           1472 :    movdqa</div>
<div class="line">...</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_view"></a>
Human-Readable View</h1>
<p>The view tool prints out the contents of the trace for human viewing, including disassembling instructions in AT&amp;T, Intel, Arm, or DR format (to see disassembly for online traces, pass the <code>-instr_encodings</code> option). The -skip_refs and -sim_refs flags can be used to set a start point and end point for the disassembled view. Note that these flags compute the number of trace entry records which are skipped or displayed which is distinct from the number of instruction records.</p>
<p>The tool displays loads and stores, as well as metadata marker entries for timestamps, on which core and thread the subsequent instruction sequence was executed, and kernel and system call transfers (these correspond to signal or event handler interruptions of the regular execution flow).</p>
<p>In its first two columns, the tool displays the trace record ordinal and the instruction fetch ordinal.</p>
<div class="fragment"><div class="line">$ $ bin64/drrun -t drcachesim -simulator_type view -indir drmemtrace.*.dir -sim_refs 20</div>
<div class="line">Output format:</div>
<div class="line">&lt;--record#-&gt; &lt;--instr#-&gt;: &lt;---tid---&gt; &lt;record details&gt;</div>
<div class="line">------------------------------------------------------------</div>
<div class="line">           1           0:     3256418 &lt;marker: version 5&gt;</div>
<div class="line">           2           0:     3256418 &lt;marker: filetype 0x240&gt;</div>
<div class="line">           3           0:     3256418 &lt;marker: cache line size 64&gt;</div>
<div class="line">           4           0:     3256418 &lt;marker: chunk instruction count 1024&gt;</div>
<div class="line">           5           0:     3256418 &lt;marker: page size 4096&gt;</div>
<div class="line">           6           0:     3256418 &lt;marker: timestamp 13312410768080478&gt;</div>
<div class="line">           7           0:     3256418 &lt;marker: tid 3256418 on core 7&gt;</div>
<div class="line">           8           1:     3256418 ifetch       3 byte(s) @ 0x00007fc205a61940 48 89 e7             mov    %rsp, %rdi</div>
<div class="line">           9           2:     3256418 ifetch       5 byte(s) @ 0x00007fc205a61943 e8 b8 0c 00 00       call   $0x00007fc205a62600</div>
<div class="line">          10           2:     3256418 write        8 byte(s) @ 0x00007fff9a9e3528 by PC 0x00007fc205a61943</div>
<div class="line">          11           3:     3256418 ifetch       1 byte(s) @ 0x00007fc205a62600 55                   push   %rbp</div>
<div class="line">          12           3:     3256418 write        8 byte(s) @ 0x00007fff9a9e3520 by PC 0x00007fc205a62600</div>
<div class="line">          13           4:     3256418 ifetch       3 byte(s) @ 0x00007fc205a62601 48 89 e5             mov    %rsp, %rbp</div>
<div class="line">          14           5:     3256418 ifetch       2 byte(s) @ 0x00007fc205a62604 41 57                push   %r15</div>
<div class="line">          15           5:     3256418 write        8 byte(s) @ 0x00007fff9a9e3518 by PC 0x00007fc205a62604</div>
<div class="line">          16           6:     3256418 ifetch       2 byte(s) @ 0x00007fc205a62606 41 56                push   %r14</div>
<div class="line">          17           6:     3256418 write        8 byte(s) @ 0x00007fff9a9e3510 by PC 0x00007fc205a62606</div>
<div class="line">          18           7:     3256418 ifetch       2 byte(s) @ 0x00007fc205a62608 41 55                push   %r13</div>
<div class="line">          19           7:     3256418 write        8 byte(s) @ 0x00007fff9a9e3508 by PC 0x00007fc205a62608</div>
<div class="line">          20           8:     3256418 ifetch       2 byte(s) @ 0x00007fc205a6260a 41 54                push   %r12</div>
<div class="line">View tool results:</div>
<div class="line">              8 : total instructions</div>
</div><!-- fragment --><p>An example of thread switches:</p>
<div class="fragment"><div class="line">------------------------------------------------------------</div>
<div class="line">       46        0:  3264758 &lt;marker: timestamp 13312413437398055&gt;</div>
<div class="line">       47        0:  3264758 &lt;marker: tid 3264758 on core 2&gt;</div>
<div class="line">       48        1:  3264758 ifetch       3 byte(s) @ 0x00007f4ea89e4940 48 89 e7             mov    %rsp, %rdi</div>
<div class="line">       49        2:  3264758 ifetch       5 byte(s) @ 0x00007f4ea89e4943 e8 b8 0c 00 00       call   $0x00007f4ea89e5600</div>
<div class="line">       50        2:  3264758 write        8 byte(s) @ 0x00007ffd93a0cf18 by PC 0x00007f4ea89e4943</div>
<div class="line">...</div>
<div class="line">  2854543  2149665:  3264758 ifetch       5 byte(s) @ 0x00007f4ea7c87f8c b8 0e 00 00 00       mov    $0x0000000e, %eax</div>
<div class="line">  2854544  2149666:  3264758 ifetch       2 byte(s) @ 0x00007f4ea7c87f91 0f 05                syscall</div>
<div class="line">------------------------------------------------------------</div>
<div class="line">  2854545  2149666:  3264760 &lt;marker: timestamp 13312413438835999&gt;</div>
<div class="line">  2854546  2149666:  3264760 &lt;marker: tid 3264760 on core 11&gt;</div>
<div class="line">  2854547  2149667:  3264760 ifetch       3 byte(s) @ 0x00007f4ea7d0b099 48 85 c0             test   %rax, %rax</div>
<div class="line">  2854548  2149668:  3264760 ifetch       2 byte(s) @ 0x00007f4ea7d0b09c 7c 18                jl     $0x00007f4ea7d0b0b6</div>
<div class="line">...</div>
</div><!-- fragment --><p>Here is an example of a signal handler interrupting the regular flow, with metadata showing that the signal was delivered just after an untaken conditional branch:</p>
<div class="fragment"><div class="line">801343      601827:     1159769 ifetch       2 byte(s) @ 0x00007fc2c3aa5c70 75 57                jnz    $0x00007fc2c3aa5cc9 (untaken)</div>
<div class="line">801344      601827:     1159769 &lt;marker: kernel xfer from 0x7fc2c3aa5c72 to handler&gt;</div>
<div class="line">801345      601827:     1159769 &lt;marker: timestamp 13335923552684013&gt;</div>
<div class="line">801346      601827:     1159769 &lt;marker: tid 1159769 on core 7&gt;</div>
<div class="line">801347      601828:     1159769 ifetch       1 <span class="keywordtype">byte</span>(s) @ 0x00007fc2c03fa259 55                   push   %rbp</div>
<div class="line">801348      601828:     1159769 write        8 byte(s) @ 0x00007fff8044e930 by PC 0x00007fc2c03fa259</div>
<div class="line">801349      601829:     1159769 ifetch       3 byte(s) @ 0x00007fc2c03fa25a 48 89 e5             mov    %rsp, %rbp</div>
<div class="line">801350      601830:     1159769 ifetch       3 byte(s) @ 0x00007fc2c03fa25d 89 7d fc             mov    %edi, -0x04(%rbp)</div>
<div class="line">801351      601830:     1159769 write        4 <span class="keywordtype">byte</span>(s) @ 0x00007fff8044e92c by PC 0x00007fc2c03fa25d</div>
<div class="line">801352      601831:     1159769 ifetch       4 byte(s) @ 0x00007fc2c03fa260 48 89 75 f0          mov    %rsi, -0x10(%rbp)</div>
<div class="line">801353      601831:     1159769 write        8 <span class="keywordtype">byte</span>(s) @ 0x00007fff8044e920 by PC 0x00007fc2c03fa260</div>
<div class="line">801354      601832:     1159769 ifetch       4 byte(s) @ 0x00007fc2c03fa264 48 89 55 e8          mov    %rdx, -0x18(%rbp)</div>
<div class="line">801355      601832:     1159769 write        8 <span class="keywordtype">byte</span>(s) @ 0x00007fff8044e918 by PC 0x00007fc2c03fa264</div>
<div class="line">801356      601833:     1159769 ifetch       4 byte(s) @ 0x00007fc2c03fa268 83 7d fc 1a          cmp    -0x04(%rbp), $0x1a</div>
<div class="line">801357      601833:     1159769 read         4 <span class="keywordtype">byte</span>(s) @ 0x00007fff8044e92c by PC 0x00007fc2c03fa268</div>
<div class="line">801358      601834:     1159769 ifetch       2 byte(s) @ 0x00007fc2c03fa26c 75 0f                jnz    $0x00007fc2c03fa27d (untaken)</div>
<div class="line">801359      601835:     1159769 ifetch       6 <span class="keywordtype">byte</span>(s) @ 0x00007fc2c03fa26e 8b 05 c0 3e 00 00    mov    &lt;rel&gt; 0x00007fc2c03fe134, %eax</div>
<div class="line">801360      601835:     1159769 read         4 byte(s) @ 0x00007fc2c03fe134 by PC 0x00007fc2c03fa26e</div>
<div class="line">801361      601836:     1159769 ifetch       3 byte(s) @ 0x00007fc2c03fa274 83 c0 01             add    $0x01, %eax</div>
<div class="line">801362      601837:     1159769 ifetch       6 byte(s) @ 0x00007fc2c03fa277 89 05 b7 3e 00 00    mov    %eax, &lt;rel&gt; 0x00007fc2c03fe134</div>
<div class="line">801363      601837:     1159769 write        4 byte(s) @ 0x00007fc2c03fe134 by PC 0x00007fc2c03fa277</div>
<div class="line">801364      601838:     1159769 ifetch       1 byte(s) @ 0x00007fc2c03fa27d 90                   nop</div>
<div class="line">801365      601839:     1159769 ifetch       1 byte(s) @ 0x00007fc2c03fa27e 5d                   pop    %rbp</div>
<div class="line">801366      601839:     1159769 read         8 byte(s) @ 0x00007fff8044e930 by PC 0x00007fc2c03fa27e</div>
<div class="line">801367      601840:     1159769 ifetch       1 byte(s) @ 0x00007fc2c03fa27f c3                   ret (target 0x7fc2c3a5af90)</div>
<div class="line">801368      601840:     1159769 read         8 byte(s) @ 0x00007fff8044e938 by PC 0x00007fc2c03fa27f</div>
<div class="line">801369      601841:     1159769 ifetch       7 byte(s) @ 0x00007fc2c3a5af90 48 c7 c0 0f 00 00 00 mov    $0x0000000f, %rax</div>
<div class="line">801370      601842:     1159769 ifetch       2 byte(s) @ 0x00007fc2c3a5af97 0f 05                syscall</div>
<div class="line">801371      601842:     1159769 &lt;marker: system call 15&gt;</div>
<div class="line">801372      601842:     1159769 &lt;marker: timestamp 13335923552684023&gt;</div>
<div class="line">801373      601842:     1159769 &lt;marker: tid 1159769 on core 7&gt;</div>
<div class="line">801374      601842:     1159769 &lt;marker: syscall xfer from 0x7fc2c3a5af99&gt;</div>
<div class="line">801375      601842:     1159769 &lt;marker: timestamp 13335923552684029&gt;</div>
<div class="line">801376      601842:     1159769 &lt;marker: tid 1159769 on core 7&gt;</div>
<div class="line">801377      601843:     1159769 ifetch       4 byte(s) @ 0x00007fc2c3aa5c72 48 83 c4 48          add    $0x48, %rsp</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_func_view"></a>
View Function Calls</h1>
<p>The func_view tool records function argument and return values for function names specified at tracing time. See <a class="el" href="sec_drcachesim_funcs.html">Tracing Function Calls</a> for more information.</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -offline -record_function <span class="stringliteral">&#39;fib|1&#39;</span> -- ~/test/fib 5</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">$ bin64/drrun -t drcachesim -simulator_type func_view -indir drmemtrace.*.dir</div>
<div class="line">0x7fc06d2288eb =&gt; common.fib!fib(0x5)</div>
<div class="line">    0x7fc06d22888e =&gt; common.fib!fib(0x4)</div>
<div class="line">        0x7fc06d22888e =&gt; common.fib!fib(0x3)</div>
<div class="line">            0x7fc06d22888e =&gt; common.fib!fib(0x2)</div>
<div class="line">                0x7fc06d22888e =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">                0x7fc06d22889d =&gt; common.fib!fib(0x0) =&gt; 0x1</div>
<div class="line">            =&gt; 0x2</div>
<div class="line">            0x7fc06d22889d =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">        =&gt; 0x3</div>
<div class="line">        0x7fc06d22889d =&gt; common.fib!fib(0x2)</div>
<div class="line">            0x7fc06d22888e =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">            0x7fc06d22889d =&gt; common.fib!fib(0x0) =&gt; 0x1</div>
<div class="line">        =&gt; 0x2</div>
<div class="line">    =&gt; 0x5</div>
<div class="line">    0x7fc06d22889d =&gt; common.fib!fib(0x3)</div>
<div class="line">        0x7fc06d22888e =&gt; common.fib!fib(0x2)</div>
<div class="line">            0x7fc06d22888e =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">            0x7fc06d22889d =&gt; common.fib!fib(0x0) =&gt; 0x1</div>
<div class="line">        =&gt; 0x2</div>
<div class="line">        0x7fc06d22889d =&gt; common.fib!fib(0x1) =&gt; 0x1</div>
<div class="line">    =&gt; 0x3</div>
<div class="line">=&gt; 0x8</div>
<div class="line">Function view tool results:</div>
<div class="line">Function <span class="keywordtype">id</span>=0: common.fib!fib</div>
<div class="line">       15 calls</div>
<div class="line">       15 returns</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_histogram"></a>
Cache Line Histogram</h1>
<p>The top referenced cache lines are displayed by the <code>histogram</code> tool:</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -simulator_type histogram -- ~/test/pi_estimator</div>
<div class="line">Estimation of pi is 3.142425985001098</div>
<div class="line">---- &lt;application exited with code 0&gt; ----</div>
<div class="line">Cache line histogram tool results:</div>
<div class="line">icache: 1134 unique cache lines</div>
<div class="line">dcache: 3062 unique cache lines</div>
<div class="line">icache top 10</div>
<div class="line">    0x7facdd013780: 30929</div>
<div class="line">    0x7facdb789fc0: 27664</div>
<div class="line">    0x7facdb78a000: 18629</div>
<div class="line">    0x7facdd003e80: 18176</div>
<div class="line">    0x7facdd003500: 11121</div>
<div class="line">    0x7facdd0034c0: 9763</div>
<div class="line">    0x7facdd005940: 8865</div>
<div class="line">    0x7facdd003480: 8277</div>
<div class="line">    0x7facdb789f80: 6660</div>
<div class="line">    0x7facdd003540: 5888</div>
<div class="line">dcache top 10</div>
<div class="line">    0x7ffcc35e7d80: 4088</div>
<div class="line">    0x7ffcc35e7d40: 3497</div>
<div class="line">    0x7ffcc35e7e00: 3478</div>
<div class="line">    0x7ffcc35e7f40: 2919</div>
<div class="line">    0x7ffcc35e7dc0: 2837</div>
<div class="line">    0x7facdbe2e980: 2452</div>
<div class="line">    0x7facdbe2ec80: 2273</div>
<div class="line">    0x7ffcc35e7e80: 2194</div>
<div class="line">    0x7facdb6625c0: 2016</div>
<div class="line">    0x7ffcc35e7e40: 1997</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_tool_invariant_checker"></a>
Invariant Checker</h1>
<p>The invariant_checker tool performs sanity checks on a trace, focusing on program counter continuity and guarantees around kernel control transfer interruptions. It optionally checks for restricted behavior that technically is legal but is not expected to happen in the target trace, helping to identify tracing problems and suitability for use of a trace for core simulation.</p>
<h1><a class="anchor" id="sec_tool_syscall_mix"></a>
System Call Mix</h1>
<p>The system call mix tool counts the frequency of system calls in a trace. It works for both online and offline traces. It uses the <a class="el" href="namespacedynamorio_1_1drmemtrace.html#ab8531c7f66ccc0d7fe59f436844a295ca9c6c0b467a729d1d4c4298bef1892c74">dynamorio::drmemtrace::TRACE_MARKER_TYPE_SYSCALL</a> markers that store the system call number. This works only with traces that have these markers; that is, offline traces must have <a class="el" href="namespacedynamorio_1_1drmemtrace.html#a017717a4b9ef5ae1f6d1fef1df834baaa2bbf303be87f5709ada421f2b68f9898">dynamorio::drmemtrace::OFFLINE_FILE_TYPE_SYSCALL_NUMBERS</a> in their file type.</p>
<div class="fragment"><div class="line">$ bin64/drrun -t drcachesim -indir drmemtrace.ls.*.dir -simulator_type syscall_mix</div>
<div class="line">Syscall mix tool results:</div>
<div class="line">          count : syscall_num</div>
<div class="line">             17 :         9</div>
<div class="line">             16 :         1</div>
<div class="line">              8 :         3</div>
<div class="line">              7 :       262</div>
<div class="line">              6 :       257</div>
<div class="line">              5 :         0</div>
<div class="line">              5 :        10</div>
<div class="line">              3 :        12</div>
<div class="line">              2 :       217</div>
<div class="line">              2 :        16</div>
<div class="line">              2 :        17</div>
<div class="line">              2 :       137</div>
<div class="line">              2 :        21</div>
<div class="line">              1 :       158</div>
<div class="line">              1 :       302</div>
<div class="line">              1 :       334</div>
<div class="line">              1 :       218</div>
<div class="line">              1 :       231</div>
<div class="line">              1 :       318</div>
<div class="line">              1 :        11</div>
<div class="line">              1 :       273</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="float:none;text-align:center"><img border=0 src="favicon.png"> &nbsp;  DynamoRIO version 10.0.19656 --- Sat Nov 23 2024 20:39:08 &nbsp; <img border=0 src="favicon.png">
</small></address>
